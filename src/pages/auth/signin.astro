---
import Layout from "@/layouts/Layout.astro";
---

<Layout title="Redirecting to Sign In">
  <style>
    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }
    .spinner {
      animation: spin 0.8s linear infinite;
    }
  </style>

  <div class="flex items-center justify-center min-h-[60vh] text-brand-gray-50">
    <div class="text-center max-w-md p-8">
      <div
        class="w-10 h-10 mx-auto mb-4 border-4 border-brand-teal-30 border-t-brand-teal-50 rounded-full spinner"
      >
      </div>
      <h1 class="text-2xl text-white mb-4">Redirecting to Sign In</h1>
      <p class="text-base mb-8">
        Please wait while we redirect you to the authentication page...
      </p>
      <noscript>
        <p class="text-base mb-4">
          JavaScript is disabled. Please enable JavaScript to continue.
        </p>
      </noscript>
    </div>
  </div>

  <script>
    import { signIn } from "auth-astro/client";

    const callbackUrl =
      new URL(window.location.href).searchParams.get("callbackUrl") || "/";
    setTimeout(async () => {
      // @ts-ignore
      await signIn("keycloak", { callbackUrl });
    }, 1500);
  </script>
</Layout>
